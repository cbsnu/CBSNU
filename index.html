<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CBSN-U: Set Your Limits Beyond The Sky</title>

    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <style>
        /* General Body and HTML Reset */
        body {
            margin: 0;
            font-family: 'Roboto', sans-serif;
            line-height: 1.6;
            color: #E0E0E0; /* Light grey text for dark theme */
            background-color: #1a1a2e; /* Dark background */
            scroll-behavior: smooth;
        }

        .container {
            width: 90%;
            max-width: 1200px;
            margin: auto;
            overflow: hidden;
            padding: 20px 0;
        }

        /* Section Styling */
        section {
            padding: 80px 0;
            margin-bottom: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            margin: 30px auto;
            background-color: #2a2a4a; /* Slightly lighter dark background for sections */
            display: none; /* Hidden by default, managed by JS for SPA effect */
        }

        section.active {
            display: block; /* Show active section */
        }

        h1, h2, h3, h4, h5, h6 {
            font-family: 'Montserrat', sans-serif;
            color: #FF6B6B; /* Red accent for headings */
            text-align: center;
            margin-bottom: 40px;
            position: relative;
            padding-bottom: 15px;
        }

        h2::after {
            content: '';
            position: absolute;
            left: 50%;
            bottom: 0;
            transform: translateX(-50%);
            width: 100px;
            height: 4px;
            background-color: #FFD700; /* Gold accent */
            border-radius: 2px;
        }

        p {
            text-align: center;
            margin-bottom: 20px;
            color: #C0C0C0; /* Slightly darker light grey for paragraphs */
        }

        .btn {
            display: inline-block;
            background: #FF6B6B; /* Red button */
            color: #FFFFFF;
            padding: 12px 25px;
            text-decoration: none;
            border-radius: 8px;
            transition: background 0.3s ease, transform 0.2s ease;
            font-weight: bold;
            font-size: 1.1em;
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2);
            border: none;
            cursor: pointer;
        }

        .btn:hover {
            background: #E05A5A;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: #FFD700; /* Gold secondary button */
            color: #1a1a2e;
        }

        .btn-secondary:hover {
            background: #E6C200;
        }

        input[type="text"],
        input[type="email"],
        input[type="password"],
        textarea,
        select {
            width: calc(100% - 20px);
            padding: 10px;
            margin-bottom: 15px;
            border-radius: 5px;
            border: 1px solid #4a4a6e; /* Darker border */
            background-color: #3a3a5e; /* Darker input background */
            color: #E0E0E0;
            box-sizing: border-box;
        }

        input[type="file"] {
            width: 100%;
            padding: 10px 0;
            margin-bottom: 15px;
            color: #E0E0E0;
        }

        label {
            display: block;
            margin-bottom: 5px;
            color: #FFD700;
            font-weight: bold;
        }

        form {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            background-color: #2a2a4a;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        /* Header & Navigation */
        header {
            background: #1a1a2e; /* Deep dark blue */
            color: #fff;
            padding: 1rem 0;
            border-bottom: 3px solid #FF6B6B; /* Red border */
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        header .container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        .logo img {
            height: 60px; /* Adjusted logo size */
            border-radius: 5px;
        }

        .logo h1 {
            color: #FFFFFF;
            margin: 0;
            font-size: 1.8em;
            text-align: left;
        }
        .logo p {
            color: #FFD700;
            font-size: 0.8em;
            margin: 0;
            text-align: left;
        }

        nav ul {
            list-style: none;
            margin: 0;
            padding: 0;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
        }

        nav ul li {
            margin-left: 25px;
            margin-bottom: 5px;
        }

        nav ul li a {
            color: #fff;
            text-decoration: none;
            font-weight: bold;
            padding: 8px 15px;
            border-radius: 5px;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        nav ul li a:hover, nav ul li a.active-nav {
            background-color: #FF6B6B; /* Red on hover/active */
            color: #FFFFFF;
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(135deg, #1a1a2e, #4a4a6e); /* Dark gradient */
            color: #fff;
            text-align: center;
            padding: 120px 0;
            position: relative;
            overflow: hidden;
            border-radius: 10px;
            margin: 30px auto;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
        }

        .hero h1 {
            font-size: 4em;
            margin-bottom: 25px;
            text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.5);
            color: #FFFFFF;
        }

        .hero p {
            font-size: 1.4em;
            margin-bottom: 50px;
            color: #E0E0E0;
        }

        /* Announcement Marquee */
        .announcement-section {
            background-color: #FFD700; /* Gold background */
            color: #1a1a2e; /* Dark text */
            padding: 10px 0;
            margin-top: -20px; /* Pull it up slightly */
            margin-bottom: 20px;
            border-radius: 5px;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        .announcement-marquee {
            white-space: nowrap;
            overflow: hidden;
            display: inline-block;
            animation: marquee 20s linear infinite;
        }

        @keyframes marquee {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }

        /* Vision Section */
        .vision-section p {
            font-size: 1.1em;
            line-height: 1.8;
            max-width: 800px;
            margin: 0 auto 30px auto;
            text-align: justify;
            color: #C0C0C0;
        }

        /* Counts Section */
        .counts-grid {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 30px;
            margin-top: 50px;
        }

        .count-item {
            background-color: #3a3a5e;
            padding: 30px;
            border-radius: 10px;
            text-align: center;
            flex: 1;
            min-width: 200px;
            max-width: 300px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s ease;
        }

        .count-item:hover {
            transform: translateY(-5px);
        }

        .count-item .number {
            font-size: 3.5em;
            font-weight: bold;
            color: #FFD700; /* Gold for numbers */
            margin-bottom: 10px;
        }

        .count-item .label {
            font-size: 1.2em;
            color: #E0E0E0;
        }

        /* Photo Gallery */
        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 40px;
        }

        .gallery-item {
            background-color: #3a3a5e;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s ease;
        }

        .gallery-item:hover {
            transform: scale(1.03);
        }

        .gallery-item img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            display: block;
        }

        /* Feedback Section */
        #feedback-display {
            margin-top: 40px;
            padding: 20px;
            background-color: #3a3a5e;
            border-radius: 10px;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.2);
            max-height: 400px; /* Limit height */
            overflow-y: auto; /* Scroll for many feedbacks */
        }

        .feedback-item {
            background-color: #4a4a6e;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 5px solid #FFD700; /* Gold accent */
        }

        .feedback-item p {
            text-align: left;
            margin: 0 0 5px 0;
            color: #E0E0E0;
        }

        .feedback-item small {
            display: block;
            text-align: right;
            color: #C0C0C0;
            font-style: italic;
        }

        /* Enrollment Banner */
        .enrollment-banner {
            background: linear-gradient(90deg, #FF6B6B, #FFD700); /* Red to Gold gradient */
            color: #1a1a2e;
            text-align: center;
            padding: 50px 20px;
            border-radius: 10px;
            margin: 30px auto;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .enrollment-banner h3 {
            color: #1a1a2e;
            font-size: 2.5em;
            margin-bottom: 15px;
        }

        .enrollment-banner p {
            font-size: 1.2em;
            margin-bottom: 30px;
            color: #333;
        }

        /* Academic Page - Scrolling Multi-Image Banner */
        .image-carousel {
            position: relative;
            width: 100%;
            overflow: hidden;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            margin-bottom: 40px;
        }

        .carousel-inner {
            display: flex;
            transition: transform 0.5s ease-in-out;
        }

        .carousel-item {
            min-width: 100%;
            box-sizing: border-box;
        }

        .carousel-item img {
            width: 100%;
            height: 400px; /* Fixed height for banner */
            object-fit: cover;
            border-radius: 10px;
        }

        .carousel-nav {
            position: absolute;
            top: 50%;
            width: 100%;
            display: flex;
            justify-content: space-between;
            transform: translateY(-50%);
            padding: 0 10px;
            box-sizing: border-box;
        }

        .carousel-nav button {
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            border: none;
            padding: 10px;
            cursor: pointer;
            border-radius: 50%;
            font-size: 1.5em;
            transition: background-color 0.3s ease;
        }

        .carousel-nav button:hover {
            background-color: rgba(0, 0, 0, 0.8);
        }

        /* Results & Certificates */
        .download-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 40px;
        }

        .download-item {
            background-color: #3a3a5e;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s ease;
        }

        .download-item:hover {
            transform: translateY(-5px);
        }

        .download-item .icon {
            font-size: 3em;
            color: #FFD700;
            margin-bottom: 15px;
        }

        .download-item h4 {
            color: #FF6B6B;
            margin-bottom: 15px;
        }

        /* Login/Signup Forms */
        .auth-forms {
            display: flex;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
            margin-top: 40px;
        }

        .auth-form {
            background-color: #3a3a5e;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            flex: 1;
            min-width: 300px;
            max-width: 45%;
        }

        .auth-form h3 {
            color: #FFD700;
            margin-bottom: 25px;
        }

        .auth-form button {
            width: 100%;
        }

        /* Dashboard Placeholder */
        .dashboard-placeholder {
            text-align: center;
            padding: 50px;
            background-color: #3a3a5e;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            margin-top: 40px;
        }
        .dashboard-placeholder h3 {
            color: #FFD700;
        }
        .dashboard-placeholder p {
            color: #E0E0E0;
        }

        /* Chatbot */
        .chatbot-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
        }

        .chatbot-button {
            background-color: #FF6B6B;
            color: white;
            border: none;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            font-size: 2em;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s ease;
        }

        .chatbot-button:hover {
            transform: scale(1.1);
        }

        .chatbot-popup {
            display: none;
            position: absolute;
            bottom: 80px;
            right: 0;
            width: 350px;
            height: 450px;
            background-color: #2a2a4a;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.5);
            flex-direction: column;
            overflow: hidden;
        }

        .chatbot-header {
            background-color: #FF6B6B;
            color: white;
            padding: 15px;
            border-top-left-radius: 10px;
            border-top-right-radius: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chatbot-header h4 {
            margin: 0;
            color: white;
            text-align: left;
            padding-bottom: 0;
        }

        .chatbot-header button {
            background: none;
            border: none;
            color: white;
            font-size: 1.5em;
            cursor: pointer;
        }

        .chatbot-messages {
            flex-grow: 1;
            padding: 15px;
            overflow-y: auto;
            background-color: #3a3a5e;
            border-bottom: 1px solid #4a4a6e;
        }

        .chatbot-input {
            padding: 15px;
            display: flex;
            gap: 10px;
        }

        .chatbot-input input {
            flex-grow: 1;
            margin-bottom: 0;
        }

        .chatbot-input button {
            padding: 10px 15px;
            border-radius: 5px;
            background-color: #FFD700;
            color: #1a1a2e;
            font-weight: bold;
        }

        .message-bubble {
            background-color: #4a4a6e;
            padding: 10px;
            border-radius: 10px;
            margin-bottom: 10px;
            max-width: 80%;
            word-wrap: break-word;
        }
        .message-bubble.user {
            background-color: #FF6B6B;
            margin-left: auto;
            color: white;
        }
        .message-bubble.bot {
            background-color: #FFD700;
            margin-right: auto;
            color: #1a1a2e;
        }

        /* Admin Page - Upload Forms */
        .admin-upload-form {
            margin-bottom: 40px;
        }

        /* Admin Dashboard - User List */
        .user-list-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 40px;
            background-color: #3a3a5e;
            border-radius: 10px;
            overflow: hidden;
        }

        .user-list-table th, .user-list-table td {
            padding: 12px 15px;
            border: 1px solid #4a4a6e;
            text-align: left;
            color: #E0E0E0;
        }

        .user-list-table th {
            background-color: #FF6B6B;
            color: white;
            font-weight: bold;
        }

        .user-list-table tr:nth-child(even) {
            background-color: #2a2a4a;
        }

        .user-list-table .action-btn {
            padding: 5px 10px;
            margin-right: 5px;
            font-size: 0.9em;
        }

        /* About Us Page - CEO/Faculties */
        .team-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }

        .team-member {
            background-color: #3a3a5e;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s ease;
        }

        .team-member:hover {
            transform: translateY(-5px);
        }

        .team-member img {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            object-fit: cover;
            margin-bottom: 15px;
            border: 4px solid #FFD700; /* Gold border */
        }

        .team-member h3 {
            color: #FFD700;
            margin-bottom: 5px;
        }

        .team-member p {
            color: #C0C0C0;
            font-size: 0.95em;
        }

        /* Progress Milestone Graph (Simple CSS Bar Chart) */
        .milestone-graph {
            margin-top: 50px;
            background-color: #3a3a5e;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .milestone-bar-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 30px;
        }

        .milestone-bar {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .milestone-label {
            width: 120px;
            color: #FFD700;
            font-weight: bold;
            text-align: right;
            flex-shrink: 0;
        }

        .bar-fill {
            height: 25px;
            background-color: #FF6B6B; /* Red fill */
            border-radius: 5px;
            position: relative;
            flex-grow: 1;
        }

        .bar-value {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            color: white;
            font-weight: bold;
            font-size: 0.9em;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }

        /* Google Map */
        .google-map {
            width: 100%;
            height: 400px;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            margin-top: 40px;
        }

        .google-map iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        /* Customer Service & Complaint Box */
        .customer-service-section {
            margin-top: 50px;
        }

        .customer-service-section p {
            text-align: center;
            margin-bottom: 30px;
        }

        /* Footer */
        footer {
            background: #1a1a2e; /* Deep dark blue */
            color: #fff;
            text-align: center;
            padding: 30px 0;
            margin-top: 50px;
            border-top: 3px solid #FF6B6B; /* Red border */
            box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.4);
        }

        footer .container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }

        .footer-info p {
            margin: 5px 0;
            color: #E0E0E0;
            font-size: 0.9em;
        }

        .footer-links a {
            color: #FFD700; /* Gold for footer links */
            text-decoration: none;
            margin: 0 15px;
            transition: color 0.3s ease;
        }

        .footer-links a:hover {
            color: #FF6B6B;
            text-decoration: underline;
        }

        .faculty-contacts {
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid #4a4a6e;
            width: 80%;
        }

        .faculty-contacts h4 {
            color: #FFD700;
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .faculty-contacts ul {
            list-style: none;
            padding: 0;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
        }

        .faculty-contacts ul li {
            background-color: #3a3a5e;
            padding: 10px 15px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        .faculty-contacts ul li a {
            color: #E0E0E0;
            text-decoration: none;
            font-weight: normal;
        }
        .faculty-contacts ul li a:hover {
            color: #FF6B6B;
        }


        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                width: 95%;
            }

            header .container {
                flex-direction: column;
                align-items: flex-start;
            }

            nav ul {
                flex-direction: column;
                margin-top: 15px;
                width: 100%;
                align-items: flex-start;
            }

            nav ul li {
                margin: 5px 0;
                width: 100%;
            }
            nav ul li a {
                display: block;
                padding: 10px;
            }

            .hero h1 {
                font-size: 3em;
            }

            .hero p {
                font-size: 1.1em;
            }

            h2 {
                font-size: 2.2em;
            }

            .counts-grid {
                flex-direction: column;
                align-items: center;
            }

            .count-item {
                width: 90%;
                max-width: 300px;
            }

            .gallery-grid, .service-grid, .team-grid, .download-section, .blog-preview-grid {
                grid-template-columns: 1fr;
            }

            .carousel-item img {
                height: 250px;
            }

            .auth-forms {
                flex-direction: column;
                gap: 20px;
            }
            .auth-form {
                max-width: 90%;
            }

            .chatbot-popup {
                width: 90%;
                height: 70%;
                bottom: 10px;
                right: 10px;
            }

            .milestone-bar {
                flex-direction: column;
                align-items: flex-start;
            }
            .milestone-label {
                text-align: left;
                width: auto;
            }
            .bar-fill {
                width: 100%;
            }
        }

        @media (max-width: 480px) {
            .hero h1 {
                font-size: 2.2em;
            }
            .hero p {
                font-size: 0.9em;
            }
            h2 {
                font-size: 1.8em;
            }
            .enrollment-banner h3 {
                font-size: 1.8em;
            }
        }
    </style>
</head>
<body>

    <header>
        <div class="container">
            <div class="logo">
                <!--
                    YOUR LOGO:
                    Replace 'https://placehold.co/180x60/FF6B6B/FFFFFF?text=CBSN-U+Logo' with the actual path to your logo image.
                    Example: 'images/1744649096909.png'
                    Make sure '1744649096909.png' is in your 'images' folder.
                -->
                <img src="1744649096909.png" alt="CBSN-U Logo">
                <h1>CBSN-U</h1>
                <p>Set Your Limits Beyond The Sky</p>
            </div>
            <nav>
                <ul>
                    <li><a href="#home" class="nav-link active-nav" data-section="home">Home</a></li>
                    <li><a href="#academic" class="nav-link" data-section="academic">Academic</a></li>
                    <li><a href="#admin" class="nav-link" data-section="admin">Admin</a></li>
                    <li><a href="#about" class="nav-link" data-section="about">About Us</a></li>
                    <li><a href="#contact" class="nav-link" data-section="contact">Contact</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main>
        <section id="home" class="active">
            <div class="container">
                <div class="hero">
                    <h1>Empowering Education for the Middle Class</h1>
                    <p>Providing the best study materials, progress reports, and scholarship opportunities.</p>
                    <a href="#contact" class="btn nav-link" data-section="contact">Get Started Today</a>
                </div>

                <div class="announcement-section">
                    <div class="container">
                        <h2>Announcements</h2>
                        <div class="announcement-marquee" id="announcementMarquee">
                            <span>Loading Announcements...</span>
                        </div>
                    </div>
                </div>

                <div class="vision-section">
                    <h2>Our Vision</h2>
                    <p>As a leading educational consultant and exam organizer, CBSN-U is committed to transforming the learning experience for middle-class individuals. Our vision is to democratize high-quality education, making it accessible and affordable, while fostering an environment that nurtures talent and academic excellence. We strive to create a seamless ecosystem for students, from providing superior study materials to organizing fair and transparent examinations, all while ensuring deserving students receive the scholarships they need to achieve their dreams. We are dedicated to continuous improvement, adapting our services to meet the evolving demands of the educational landscape.</p>
                </div>

                <h2>Our Impact</h2>
                <div class="counts-grid">
                    <div class="count-item">
                        <div class="number" id="studentCount">0</div>
                        <div class="label">Students Empowered</div>
                    </div>
                    <div class="count-item">
                        <div class="number" id="facultyCount">0</div>
                        <div class="label">Dedicated Faculties</div>
                    </div>
                    <div class="count-item">
                        <div class="number" id="institutionCount">0</div>
                        <div class="label">Partner Institutions</div>
                    </div>
                </div>

                <h2>Our Gallery</h2>
                <div class="gallery-grid" id="homePhotoGallery">
                    <p style="grid-column: 1/-1; text-align: center;">Loading gallery images...</p>
                </div>

                <h2>Share Your Feedback</h2>
                <form id="feedbackForm">
                    <label for="feedbackName">Your Name:</label>
                    <input type="text" id="feedbackName" required>

                    <label for="feedbackContent">Your Feedback:</label>
                    <textarea id="feedbackContent" rows="5" required></textarea>

                    <button type="submit" class="btn">Submit Feedback</button>
                    <div id="feedbackMessage" style="color: #FFD700; text-align: center; margin-top: 10px;"></div>
                </form>

                <h3 style="margin-top: 50px;">What Our Clients Say:</h3>
                <div id="feedback-display">
                    <p style="text-align: center;">No feedback yet. Be the first!</p>
                </div>

                <div class="enrollment-banner">
                    <h3>Ready to Set Your Limits Beyond The Sky?</h3>
                    <p>Join CBSN-U and unlock a world of educational opportunities. Enroll today!</p>
                    <a href="#contact" class="btn nav-link" data-section="contact">Enroll Now</a>
                </div>
            </div>
        </section>

        <section id="academic">
            <div class="container">
                <h2>Academic Corner</h2>

                <h3>Explore Our Campus & Activities</h3>
                <div class="image-carousel">
                    <div class="carousel-inner" id="academicCarouselInner">
                        <!--
                            Academic Carousel Images:
                            Replace these placeholder URLs with your actual academic images.
                            Example: 'images/academic_classroom.jpg'
                        -->
                        <div class="carousel-item"><img src="2.png" alt="Academic View 1"></div>
                        <div class="carousel-item"><img src="1.png" alt="Academic View 2"></div>
                        <div class="carousel-item"><img src="3.png" alt="Academic View 3"></div>
                    </div>
                    <div class="carousel-nav">
                        <button id="prevCarousel">&#10094;</button>
                        <button id="nextCarousel">&#10095;</button>
                    </div>
                </div>

                <h3>Results & Certificates</h3>
                <p>Students can download their results and certificates here. (Admin upload only)</p>
                <div class="download-section" id="academicDownloads">
                    <div class="download-item">
                        <span class="icon"><i class="fas fa-file-pdf"></i></span>
                        <h4>Sample Result Sheet</h4>
                        <a href="https://www.africau.edu/images/default/sample.pdf" target="_blank" class="btn btn-secondary">Download PDF</a>
                        <!--
                            Developer Note: This is a sample PDF.
                            Actual PDF links will need to be managed via Firebase Storage and a backend.
                            Admin upload for these files is a backend feature.
                        -->
                    </div>
                    <div class="download-item">
                        <span class="icon"><i class="fas fa-certificate"></i></span>
                        <h4>Sample Certificate</h4>
                        <a href="https://www.africau.edu/images/default/sample.pdf" target="_blank" class="btn btn-secondary">Download PDF</a>
                    </div>
                </div>

                <h2>User Login & Signup</h2>
                <div class="auth-forms">
                    <div class="auth-form">
                        <h3>Login</h3>
                        <form id="loginForm">
                            <label for="loginUserType">I am a:</label>
                            <select id="loginUserType" required>
                                <option value="">Select User Type</option>
                                <option value="student">Student</option>
                                <option value="faculty">Faculty</option>
                                <option value="employee">Employee</option>
                            </select>

                            <label for="loginState">State:</label>
                            <input type="text" id="loginState" placeholder="Enter your State" required>

                            <label for="loginDistrict">District:</label>
                            <input type="text" id="loginDistrict" placeholder="Enter your District" required>

                            <label for="loginInstitute">Institute Name:</label>
                            <input type="text" id="loginInstitute" placeholder="Enter your Institute Name" required>

                            <label for="loginEmail">Email:</label>
                            <input type="email" id="loginEmail" placeholder="Your Email" required>

                            <label for="loginPassword">Password:</label>
                            <input type="password" id="loginPassword" placeholder="Your Password" required>

                            <button type="submit" class="btn">Login</button>
                            <div id="loginMessage" style="color: #FF6B6B; text-align: center; margin-top: 10px;"></div>
                        </form>
                    </div>

                    <div class="auth-form">
                        <h3>Signup</h3>
                        <form id="signupForm">
                            <label for="signupUserType">I am a:</label>
                            <select id="signupUserType" required>
                                <option value="">Select User Type</option>
                                <option value="student">Student</option>
                                <option value="faculty">Faculty</option>
                                <option value="employee">Employee</option>
                            </select>

                            <label for="signupState">State:</label>
                            <input type="text" id="signupState" placeholder="Enter your State" required>

                            <label for="signupDistrict">District:</label>
                            <input type="text" id="signupDistrict" placeholder="Enter your District" required>

                            <label for="signupInstitute">Institute Name:</label>
                            <input type="text" id="signupInstitute" placeholder="Enter your Institute Name" required>

                            <label for="signupEmail">Email:</label>
                            <input type="email" id="signupEmail" placeholder="Your Email" required>

                            <label for="signupPassword">Password:</label>
                            <input type="password" id="signupPassword" placeholder="Choose a Password" required>

                            <button type="submit" class="btn btn-secondary">Sign Up</button>
                            <div id="signupMessage" style="color: #FF6B6B; text-align: center; margin-top: 10px;"></div>
                        </form>
                    </div>
                </div>

                <div class="dashboard-placeholder" id="userDashboard">
                    <h3>User Dashboard</h3>
                    <p>Welcome to your dashboard! (This section will be dynamically loaded after successful login)</p>
                    <p>Here you will find options relevant to your user type (Student, Faculty, Employee).</p>

                    <div id="studentDashboardContent" style="display: none;">
                        <h4>Student Features:</h4>
                        <p>Your Courses, Assignments, Results, and Payment Options.</p>
                        <button class="btn" id="payNowBtn">Pay Now (Razorpay Integration)</button>
                        <div id="paymentStatus" style="color: #FFD700; margin-top: 10px;"></div>
                        <h5>Your Assignments:</h5>
                        <ul id="studentAssignmentsList" style="list-style: none; padding: 0;">
                            <li><a href="https://www.africau.edu/images/default/sample.pdf" target="_blank" style="color: #FFD700;">Sample Assignment 1 (PDF)</a></li>
                            </ul>
                    </div>

                    <div id="facultyDashboardContent" style="display: none;">
                        <h4>Faculty Features:</h4>
                        <p>Upload Assignments, Manage Courses, View Student Progress.</p>
                        <form id="assignmentUploadForm" style="max-width: 500px;">
                            <label for="assignmentTitle">Assignment Title:</label>
                            <input type="text" id="assignmentTitle" required>
                            <label for="assignmentFile">Upload Assignment (PDF):</label>
                            <input type="file" id="assignmentFile" accept=".pdf" required>
                            <button type="submit" class="btn">Upload Assignment</button>
                            <div id="assignmentUploadStatus" style="color: #FFD700; margin-top: 10px;"></div>
                        </form>
                    </div>
                </div>

                <div class="chatbot-container">
                    <button class="chatbot-button" id="chatbotToggle"><i class="fas fa-comments"></i></button>
                    <div class="chatbot-popup" id="chatbotPopup">
                        <div class="chatbot-header">
                            <h4>CBSN-U Support Chat</h4>
                            <button id="chatbotClose">&times;</button>
                        </div>
                        <div class="chatbot-messages" id="chatbotMessages">
                            <div class="message-bubble bot">Hello! How can I help you today?</div>
                        </div>
                        <div class="chatbot-input">
                            <input type="text" id="chatbotInput" placeholder="Type your message...">
                            <button id="chatbotSend"><i class="fas fa-paper-plane"></i></button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="admin">
            <div class="container">
                <h2>Admin Panel</h2>

                <h3>Admin Access</h3>
                <div class="auth-forms">
                    <div class="auth-form">
                        <h3>Admin Login</h3>
                        <form id="adminLoginForm">
                            <label for="adminLoginEmail">Email:</label>
                            <input type="email" id="adminLoginEmail" placeholder="Admin Email" required>
                            <label for="adminLoginPassword">Password:</label>
                            <input type="password" id="adminLoginPassword" placeholder="Admin Password" required>
                            <button type="submit" class="btn">Login as Admin</button>
                            <div id="adminLoginMessage" style="color: #FF6B6B; text-align: center; margin-top: 10px;"></div>
                        </form>
                    </div>
                    <div class="auth-form">
                        <h3>Client (School/Institution) Login</h3>
                        <form id="clientLoginForm">
                            <label for="clientLoginEmail">Email:</label>
                            <input type="email" id="clientLoginEmail" placeholder="Client Email" required>
                            <label for="clientLoginPassword">Password:</label>
                            <input type="password" id="clientLoginPassword" placeholder="Client Password" required>
                            <button type="submit" class="btn btn-secondary">Login as Client</button>
                            <div id="clientLoginMessage" style="color: #FF6B6B; text-align: center; margin-top: 10px;"></div>
                        </form>
                    </div>
                </div>

                <div class="dashboard-placeholder" id="adminDashboard" style="display: none;">
                    <h3>Admin Dashboard</h3>
                    <p>Welcome, Admin! Here you can manage website content and users.</p>

                    <h4>Upload New Announcement</h4>
                    <form id="announcementUploadForm" class="admin-upload-form">
                        <label for="announcementText">Announcement Text:</label>
                        <textarea id="announcementText" rows="3" required></textarea>
                        <button type="submit" class="btn">Publish Announcement</button>
                        <div id="announcementStatus" style="color: #FFD700; text-align: center; margin-top: 10px;"></div>
                    </form>

                    <h4>Upload Gallery Images</h4>
                    <form id="galleryUploadForm" class="admin-upload-form">
                        <label for="galleryImage">Select Image:</label>
                        <input type="file" id="galleryImage" accept="image/*" required>
                        <label for="imageCaption">Image Caption (Optional):</label>
                        <input type="text" id="imageCaption" placeholder="e.g., Annual Sports Day">
                        <button type="submit" class="btn">Upload Image</button>
                        <div id="galleryUploadStatus" style="color: #FFD700; text-align: center; margin-top: 10px;"></div>
                    </form>

                    <h4>Manage Users</h4>
                    <table class="user-list-table">
                        <thead>
                            <tr>
                                <th>User ID</th>
                                <th>Email</th>
                                <th>Type</th>
                                <th>Institute</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="userListBody">
                            <tr>
                                <td>user123</td>
                                <td>student@example.com</td>
                                <td>Student</td>
                                <td>Bright Minds</td>
                                <td>
                                    <button class="btn btn-secondary action-btn">Edit</button>
                                    <button class="btn action-btn" style="background-color: #dc3545;">Delete</button>
                                </td>
                            </tr>
                            <tr>
                                <td>fac456</td>
                                <td>faculty@example.com</td>
                                <td>Faculty</td>
                                <td>Genius Academy</td>
                                <td>
                                    <button class="btn btn-secondary action-btn">Edit</button>
                                    <button class="btn action-btn" style="background-color: #dc3545;">Delete</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="dashboard-placeholder" id="clientDashboard" style="display: none;">
                    <h3>Client Dashboard</h3>
                    <p>Welcome, Client! Here you can manage courses for your institution.</p>

                    <h4>Upload New Course</h4>
                    <form id="courseUploadForm" style="max-width: 500px;">
                        <label for="courseName">Course Name:</label>
                        <input type="text" id="courseName" required>
                        <label for="courseDescription">Description:</label>
                        <textarea id="courseDescription" rows="3"></textarea>
                        <label for="courseFees">Fees (INR):</label>
                        <input type="number" id="courseFees" min="0" required>
                        <button type="submit" class="btn">Upload Course</button>
                        <div id="courseUploadStatus" style="color: #FFD700; text-align: center; margin-top: 10px;"></div>
                    </form>
                </div>
            </div>
        </section>

        <section id="about">
            <div class="container">
                <h2>About Us</h2>

                <p><strong>Company Name:</strong> CBSN-U (Cross Border Study Network -U)</p>
                <p><strong>Company Slogan:</strong> Set Your Limits Beyond The Sky.</p>
                <p><strong>Company Type:</strong> OPC (One Person Company)</p>
                <p><strong>Head Office Address:</strong> Begusarai, Bihar, 851101, India</p>
                <p><strong>Secondary Office Address:</strong> 20656 Burton St, Canoga Park, CA 91304, USA (Note: Corrected address based on common format)</p>
                <p><strong>Contact Phone Numbers:</strong> +1 818-388-2065 / +91 8709547748</p>
                <p><strong>Official Emails:</strong> cbsnu@gmail.com, cbsnu.contact@gmail.com</p>

                <h3>Our Leadership</h3>
                <div class="team-grid">
                    <div class="team-member">
                        <!--
                            CEO Image: CEO.jpg
                            Replace 'https://placehold.co/150x150/FFD700/1a1a2e?text=CEO' with the actual path to your CEO image.
                            Example: 'images/CEO.jpg'
                            Make sure 'CEO.jpg' is in your 'images' folder.
                        -->
                        <img src="https://placehold.co/150x150/FFD700/1a1a2e?text=CEO" alt="Rittik Raj - CEO & Founder">
                        <h3>Rittik Raj</h3>
                        <p>CEO & Founder</p>
                        <p>Education: B.Sc Agriculture (Ghanshyam Urvashi PG College, Prayagraj)</p>
                        <p>Cyber Security from Craw Cyber Security, Delhi</p>
                    </div>
                    <div class="team-member">
                        <img src="https://placehold.co/150x150/FF6B6B/FFFFFF?text=Faculty+1" alt="Top Faculty 1">
                        <h3>[Faculty Name 1]</h3>
                        <p>Subject/Role</p>
                        <p>Expert in [Area]</p>
                    </div>
                    <div class="team-member">
                        <img src="https://placehold.co/150x150/4a4a6e/FFFFFF?text=Faculty+2" alt="Top Faculty 2">
                        <h3>[Faculty Name 2]</h3>
                        <p>Subject/Role</p>
                        <p>Specialization</p>
                    </div>
                </div>

                <h2>Our Milestones</h2>
                <div class="milestone-graph">
                    <h3>Progress by Year</h3>
                    <div class="milestone-bar-container">
                        <div class="milestone-bar">
                            <span class="milestone-label">2023:</span>
                            <div class="bar-fill" style="width: 60%;">
                                <span class="bar-value">60%</span>
                            </div>
                        </div>
                        <div class="milestone-bar">
                            <span class="milestone-label">2024:</span>
                            <div class="bar-fill" style="width: 85%;">
                                <span class="bar-value">85%</span>
                            </div>
                        </div>
                        <div class="milestone-bar">
                            <span class="milestone-label">2025 (Target):</span>
                            <div class="bar-fill" style="width: 100%;">
                                <span class="bar-value">100%</span>
                            </div>
                        </div>
                    </div>

                    <h3>Students Reached</h3>
                    <div class="milestone-bar-container">
                        <div class="milestone-bar">
                            <span class="milestone-label">Students:</span>
                            <div class="bar-fill" style="width: 75%;">
                                <span class="bar-value">75%</span>
                            </div>
                        </div>
                    </div>

                    <h3>Area Covered (by clients)</h3>
                    <div class="milestone-bar-container">
                        <div class="milestone-bar">
                            <span class="milestone-label">Districts:</span>
                            <div class="bar-fill" style="width: 50%;">
                                <span class="bar-value">50%</span>
                            </div>
                        </div>
                    </div>
                    <p style="margin-top: 30px; color: #FFD700;">
                        <!--
                            Developer Note: "Services available according to the client who selected their district"
                            This dynamic display of services based on district selection would require:
                            1. A database of services and their associated districts.
                            2. Backend logic to query this database based on user input (e.g., a dropdown for district selection).
                            3. Frontend JavaScript to display the filtered services.
                            For this frontend-only example, this is conceptual.
                        -->
                        Our services are currently available in X districts. (This needs backend data)
                    </p>
                </div>

                <h2>Find Us On The Map</h2>
                <div class="google-map">
                    <!--
                        Google Map Embed:
                        Replace the 'src' URL with the embed code for your specific address (Begusarai, Bihar).
                        Go to Google Maps, search for your address, click 'Share', then 'Embed a map', and copy the iframe src.
                    -->
                    <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d115340.5284897457!2d85.99268383828124!3d25.42436859999999!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x39f13e77f08b3c3b%3A0x7d2e0b5d9e5f7a7!2sBegusarai%2C%20Bihar!5e0!3m2!1sen!2sin!4v1678901234567!5m2!1sen!2sin" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                </div>

                <div class="customer-service-section">
                    <h2>Customer Service & Complaint Box</h2>
                    <p>We are here to help! For any inquiries or complaints, please use the form below.</p>
                    <form id="complaintForm">
                        <label for="complaintName">Your Name:</label>
                        <input type="text" id="complaintName" required>

                        <label for="complaintEmail">Your Email:</label>
                        <input type="email" id="complaintEmail" required>

                        <label for="complaintSubject">Subject:</label>
                        <input type="text" id="complaintSubject" required>

                        <label for="complaintMessage">Your Message/Complaint:</label>
                        <textarea id="complaintMessage" rows="7" required></textarea>

                        <button type="submit" class="btn">Submit Complaint</button>
                        <div id="complaintMessageStatus" style="color: #FFD700; text-align: center; margin-top: 10px;"></div>
                    </form>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <div class="footer-info">
                <p>&copy; 2025 CBSN-U. All rights reserved.</p>
                <p><strong>Head Office:</strong> Begusarai, Bihar, 851101, India</p>
                <p><strong>Contact:</strong> +1 818-388-2065 / +91 8709547748</p>
                <p><strong>Email:</strong> cbsnu@gmail.com, cbsnu.contact@gmail.com</p>
            </div>
            <div class="footer-links">
                <a href="#" class="nav-link" data-section="home">Home</a>
                <a href="#" class="nav-link" data-section="about">About Us</a>
                <a href="#" class="nav-link" data-section="academic">Academic</a>
                <a href="#">Privacy Policy</a> <a href="#">Terms of Service</a> <!-- 
                <a href="#" target="_blank"><i class="fab fa-instagram"></i></a>
                <a href="#" target="_blank"><i class="fab fa-facebook"></i></a>
                -->
            </div>
            <div class="faculty-contacts">
                <h4>Important Faculty Contacts:</h4>
                <ul id="facultyContactList">
                    <!--
                        Faculty contact information will be loaded here.
                        Developer Note: This data would typically come from a backend database,
                        uploaded by faculties via their dashboard, and then displayed here.
                        For now, it's a placeholder.
                    -->
                    <li><a href="mailto:faculty1@cbsnu.live">Faculty Name 1 (Subject): faculty1@cbsnu.live</a></li>
                    <li><a href="mailto:faculty2@cbsnu.live">Faculty Name 2 (Subject): faculty2@cbsnu.live</a></li>
                </ul>
            </div>
        </div>
    </footer>

    <script type="module" src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js"></script>
    <script type="module" src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js"></script>
    <script type="module" src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js"></script>
    <script type="module" src="https://www.gstatic.com/firebasejs/10.12.2/firebase-storage.js"></script>
    <script type="module" src="https://www.gstatic.com/firebasejs/10.12.2/firebase-analytics.js"></script>

    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>

    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>

    <script type="module">
        // Initialize EmailJS (Public ID from your provided details)
        emailjs.init("DqEZGom9bxso5B5Zl"); // Replace with your actual Public ID

        // Firebase Configuration (from your provided details)
        const firebaseConfig = {
            apiKey: "AIzaSyCPN3VAXottCg3vDr0fMSu1niSVGNT3V9o",
            authDomain: "cbsnu-d8dbb.firebaseapp.com",
            projectId: "cbsnu-d8dbb",
            storageBucket: "cbsnu-d8dbb.firebasestorage.app",
            messagingSenderId: "1066269637289",
            appId: "1:1066269637289:web:cb1977ba240e05a0b587b8",
            measurementId: "G-TMBEL8E5ZQ"
        };

        // Import Firebase functions
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
        import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
        import { getFirestore, collection, addDoc, getDocs, query, orderBy, onSnapshot, doc, deleteDoc, updateDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";
        import { getStorage, ref, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-storage.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-analytics.js";

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const storage = getStorage(app);
        const analytics = getAnalytics(app); // Initialize analytics if needed

        // --- Global Variables for User State ---
        let currentUser = null; // Stores current authenticated user
        let currentUserId = null; // Stores current authenticated user's UID
        let currentUserType = null; // Stores 'student', 'faculty', 'employee', 'admin', 'client'
        let currentUserInstitute = null; // Stores institute name for specific users

        // --- Helper Function for Showing Messages ---
        function showMessage(elementId, message, isError = false) {
            const element = document.getElementById(elementId);
            if (element) {
                element.textContent = message;
                element.style.color = isError ? '#dc3545' : '#FFD700'; // Red for error, gold for success
            }
        }

        // --- Section Navigation Logic ---
        const navLinks = document.querySelectorAll('.nav-link');
        const sections = document.querySelectorAll('section');

        function showSection(sectionId) {
            sections.forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(sectionId).classList.add('active');

            // Update active class in navigation
            navLinks.forEach(link => {
                link.classList.remove('active-nav');
                if (link.getAttribute('data-section') === sectionId) {
                    link.classList.add('active-nav');
                }
            });
        }

        // Event listeners for navigation links
        navLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const sectionId = e.target.getAttribute('data-section');
                showSection(sectionId);
                // Scroll to top of the section for better UX
                document.getElementById(sectionId).scrollIntoView({ behavior: 'smooth', block: 'start' });
            });
        });

        // Show home section by default on page load
        document.addEventListener('DOMContentLoaded', () => {
            showSection('home');
            // Initial load of dynamic content
            loadAnnouncements();
            loadHomePhotoGallery();
            loadFeedbacks();
            updateCounts();
        });


        // --- Home Page Functionality ---

        // 1. Announcement Marquee (Firebase Integration)
        async function loadAnnouncements() {
            const announcementMarquee = document.getElementById('announcementMarquee');
            announcementMarquee.innerHTML = '<span>Loading Announcements...</span>'; // Reset
            try {
                // Developer Note: Firestore security rules must allow public read for 'announcements' collection.
                const q = query(collection(db, "announcements")); // No orderBy for simplicity, sort in JS if needed
                const querySnapshot = await getDocs(q);
                let announcements = [];
                querySnapshot.forEach((doc) => {
                    announcements.push(doc.data().text);
                });

                if (announcements.length > 0) {
                    announcementMarquee.innerHTML = `<span>${announcements.join(' | ')}</span>`;
                } else {
                    announcementMarquee.innerHTML = '<span>No new announcements at the moment.</span>';
                }
            } catch (error) {
                console.error("Error loading announcements:", error);
                announcementMarquee.innerHTML = '<span>Failed to load announcements.</span>';
            }
        }

        // 2. Student and Faculty Count (Placeholder - Backend Needed for Dynamic)
        function updateCounts() {
            // Developer Note: These counts should be fetched from a backend database (e.g., Firebase Firestore)
            // where user data is stored. For now, they are static placeholders.
            document.getElementById('studentCount').textContent = '500+';
            document.getElementById('facultyCount').textContent = '50+';
            document.getElementById('institutionCount').textContent = '10+';
        }

        // 3. Photo Gallery (Firebase Integration for Display)
        async function loadHomePhotoGallery() {
            const galleryGrid = document.getElementById('homePhotoGallery');
            galleryGrid.innerHTML = '<p style="grid-column: 1/-1; text-align: center;">Loading gallery images...</p>';
            try {
                // Developer Note: Firestore security rules must allow public read for 'gallery' collection.
                // Firebase Storage security rules must allow public read for the images.
                const q = query(collection(db, "gallery"));
                const querySnapshot = await getDocs(q);
                let galleryHtml = '';
                if (querySnapshot.empty) {
                    galleryHtml = '<p style="grid-column: 1/-1; text-align: center;">No images in the gallery yet.</p>';
                } else {
                    querySnapshot.forEach((doc) => {
                        const imageData = doc.data();
                        galleryHtml += `
                            <div class="gallery-item">
                                <img src="${imageData.url}" alt="${imageData.caption || 'Gallery Image'}">
                            </div>
                        `;
                    });
                }
                galleryGrid.innerHTML = galleryHtml;
            } catch (error) {
                console.error("Error loading gallery images:", error);
                galleryGrid.innerHTML = '<p style="grid-column: 1/-1; text-align: center;">Failed to load gallery images.</p>';
            }
        }

        // 4. Feedback Section (Firebase Integration for Save & Display)
        const feedbackForm = document.getElementById('feedbackForm');
        const feedbackDisplay = document.getElementById('feedback-display');

        feedbackForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const name = document.getElementById('feedbackName').value;
            const content = document.getElementById('feedbackContent').value;

            if (!name || !content) {
                showMessage('feedbackMessage', 'Please fill in all fields.', true);
                return;
            }

            try {
                // Developer Note: Firestore security rules must allow authenticated write for 'feedbacks' collection.
                // For public feedback, consider anonymous authentication or specific rules.
                await addDoc(collection(db, "feedbacks"), {
                    name: name,
                    content: content,
                    timestamp: new Date()
                });
                showMessage('feedbackMessage', 'Feedback submitted successfully!', false);
                feedbackForm.reset();
                loadFeedbacks(); // Reload feedbacks to show the new one
            } catch (error) {
                console.error("Error submitting feedback:", error);
                showMessage('feedbackMessage', 'Failed to submit feedback. Please try again.', true);
            }
        });

        async function loadFeedbacks() {
            feedbackDisplay.innerHTML = '<p style="text-align: center;">Loading feedbacks...</p>';
            try {
                // Developer Note: Firestore security rules must allow public read for 'feedbacks' collection.
                const q = query(collection(db, "feedbacks"), orderBy("timestamp", "desc"));
                const querySnapshot = await getDocs(q);
                let feedbacksHtml = '';
                if (querySnapshot.empty) {
                    feedbacksHtml = '<p style="text-align: center;">No feedback yet. Be the first!</p>';
                } else {
                    querySnapshot.forEach((doc) => {
                        const feedback = doc.data();
                        const date = feedback.timestamp ? new Date(feedback.timestamp.toDate()).toLocaleString() : 'N/A';
                        feedbacksHtml += `
                            <div class="feedback-item">
                                <p>"${feedback.content}"</p>
                                <small>- ${feedback.name} on ${date}</small>
                            </div>
                        `;
                    });
                }
                feedbackDisplay.innerHTML = feedbacksHtml;
            } catch (error) {
                console.error("Error loading feedbacks:", error);
                feedbackDisplay.innerHTML = '<p style="text-align: center;">Failed to load feedbacks.</p>';
            }
        }


        // --- Academic Page Functionality ---

        // 1. Scrolling Multi-Image Banner (Carousel)
        const carouselInner = document.getElementById('academicCarouselInner');
        const prevCarouselBtn = document.getElementById('prevCarousel');
        const nextCarouselBtn = document.getElementById('nextCarousel');
        let currentIndex = 0;

        function updateCarousel() {
            const itemWidth = carouselInner.children[0].clientWidth;
            carouselInner.style.transform = `translateX(${-currentIndex * itemWidth}px)`;
        }

        nextCarouselBtn.addEventListener('click', () => {
            currentIndex = (currentIndex + 1) % carouselInner.children.length;
            updateCarousel();
        });

        prevCarouselBtn.addEventListener('click', () => {
            currentIndex = (currentIndex - 1 + carouselInner.children.length) % carouselInner.children.length;
            updateCarousel();
        });

        window.addEventListener('resize', updateCarousel); // Adjust on resize

        // 2. User Login/Signup (Firebase Authentication)
        const loginForm = document.getElementById('loginForm');
        const signupForm = document.getElementById('signupForm');
        const userDashboard = document.getElementById('userDashboard');
        const studentDashboardContent = document.getElementById('studentDashboardContent');
        const facultyDashboardContent = document.getElementById('facultyDashboardContent');

        // Handles user state changes (login/logout)
        onAuthStateChanged(auth, (user) => {
            if (user) {
                currentUser = user;
                currentUserId = user.uid;
                // Developer Note: User type and institute should be stored in Firestore
                // when the user signs up and fetched here after login.
                // For this example, we'll assume a userType is stored in a 'users' collection.
                fetchUserData(user.uid);
            } else {
                currentUser = null;
                currentUserId = null;
                currentUserType = null;
                currentUserInstitute = null;
                userDashboard.style.display = 'none'; // Hide dashboard if logged out
                studentDashboardContent.style.display = 'none';
                facultyDashboardContent.style.display = 'none';
            }
        });

        async function fetchUserData(uid) {
            try {
                const userDocRef = doc(db, "users", uid);
                const userDocSnap = await getDoc(userDocRef);
                if (userDocSnap.exists()) {
                    const userData = userDocSnap.data();
                    currentUserType = userData.userType;
                    currentUserInstitute = userData.institute;
                    displayUserDashboard();
                } else {
                    console.warn("User data not found in Firestore for UID:", uid);
                    // Handle case where user data isn't in Firestore (e.g., new signup)
                    // For now, default to showing generic dashboard
                    displayUserDashboard();
                }
            } catch (error) {
                console.error("Error fetching user data:", error);
                displayUserDashboard(); // Still try to show dashboard
            }
        }

        function displayUserDashboard() {
            userDashboard.style.display = 'block';
            document.getElementById('loginForm').reset();
            document.getElementById('signupForm').reset();
            showMessage('loginMessage', '');
            showMessage('signupMessage', '');

            // Show specific dashboard content based on user type
            studentDashboardContent.style.display = 'none';
            facultyDashboardContent.style.display = 'none';

            if (currentUserType === 'student') {
                studentDashboardContent.style.display = 'block';
                // Developer Note: Load student-specific data (courses, assignments, results) from Firestore
            } else if (currentUserType === 'faculty') {
                facultyDashboardContent.style.display = 'block';
                // Developer Note: Load faculty-specific data (uploaded assignments) from Firestore
            }
            // Add logic for 'employee' type if needed
        }

        // User Signup
        signupForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('signupEmail').value;
            const password = document.getElementById('signupPassword').value;
            const userType = document.getElementById('signupUserType').value;
            const state = document.getElementById('signupState').value;
            const district = document.getElementById('signupDistrict').value;
            const institute = document.getElementById('signupInstitute').value;

            if (!email || !password || !userType || !state || !district || !institute) {
                showMessage('signupMessage', 'Please fill all fields.', true);
                return;
            }

            try {
                const userCredential = await createUserWithEmailAndPassword(auth, email, password);
                const user = userCredential.user;

                // Developer Note: Save additional user data (userType, state, district, institute) to Firestore
                // This is crucial for user management and filtering.
                await setDoc(doc(db, "users", user.uid), {
                    email: email,
                    userType: userType,
                    state: state,
                    district: district,
                    institute: institute,
                    createdAt: new Date()
                });

                showMessage('signupMessage', 'Signup successful! You are now logged in.', false);
                signupForm.reset();
                // onAuthStateChanged listener will handle dashboard display
            } catch (error) {
                console.error("Signup error:", error);
                let errorMessage = 'Signup failed.';
                if (error.code === 'auth/email-already-in-use') {
                    errorMessage = 'Email already in use.';
                } else if (error.code === 'auth/weak-password') {
                    errorMessage = 'Password should be at least 6 characters.';
                }
                showMessage('signupMessage', errorMessage, true);
            }
        });

        // User Login
        loginForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            const userType = document.getElementById('loginUserType').value; // For filtering
            const state = document.getElementById('loginState').value; // For filtering
            const district = document.getElementById('loginDistrict').value; // For filtering
            const institute = document.getElementById('loginInstitute').value; // For filtering

            if (!email || !password || !userType || !state || !district || !institute) {
                showMessage('loginMessage', 'Please fill all fields.', true);
                return;
            }

            try {
                const userCredential = await signInWithEmailAndPassword(auth, email, password);
                const user = userCredential.user;

                // Developer Note: After successful Firebase Auth login,
                // you must verify the user's type, state, district, and institute from Firestore
                // to ensure they match the entered criteria before granting dashboard access.
                // This is a critical security step and requires backend logic.
                const userDocRef = doc(db, "users", user.uid);
                const userDocSnap = await getDoc(userDocRef);

                if (userDocSnap.exists()) {
                    const userData = userDocSnap.data();
                    if (userData.userType === userType &&
                        userData.state === state &&
                        userData.district === district &&
                        userData.institute === institute) {
                        showMessage('loginMessage', 'Login successful!', false);
                        // onAuthStateChanged listener will handle dashboard display
                    } else {
                        // Mismatch in user type/location, log out the user
                        await signOut(auth);
                        showMessage('loginMessage', 'Login failed: Credentials or details do not match.', true);
                    }
                } else {
                    await signOut(auth);
                    showMessage('loginMessage', 'User data not found. Please sign up first.', true);
                }

            } catch (error) {
                console.error("Login error:", error);
                let errorMessage = 'Login failed. Invalid email or password.';
                if (error.code === 'auth/user-not-found') {
                    errorMessage = 'No user found with this email.';
                } else if (error.code === 'auth/wrong-password') {
                    errorMessage = 'Incorrect password.';
                }
                showMessage('loginMessage', errorMessage, true);
            }
        });

        // Student Dashboard - Payment (Razorpay Integration)
        const payNowBtn = document.getElementById('payNowBtn');
        payNowBtn.addEventListener('click', () => {
            // Developer Note: For a real payment, you'd typically make a backend call
            // to create an order with Razorpay and get an order ID.
            // This is a simplified frontend example.
            const options = {
                key: "YOUR_RAZORPAY_KEY_ID", // Replace with your actual Razorpay Key ID
                amount: "50000", // Amount in paisa (e.g., 50000 paisa = INR 500)
                currency: "INR",
                name: "CBSN-U Course Fees",
                description: "Payment for your course",
                image: "https://placehold.co/50x50/FF6B6B/FFFFFF?text=Logo", // Replace with your logo
                handler: function (response) {
                    // Developer Note: After successful payment, you MUST verify the payment
                    // on your backend using the response.razorpay_payment_id and response.razorpay_order_id
                    // to prevent fraud.
                    showMessage('paymentStatus', 'Payment successful! Payment ID: ' + response.razorpay_payment_id, false);
                    console.log("Payment successful:", response);
                },
                prefill: {
                    name: "Student Name", // Pre-fill with actual student name
                    email: "student@example.com", // Pre-fill with actual student email
                    contact: "9999999999" // Pre-fill with actual student contact
                },
                notes: {
                    address: "Begusarai, Bihar"
                },
                theme: {
                    color: "#FF6B6B" // Razorpay theme color
                }
            };
            const rzp1 = new Razorpay(options);
            rzp1.open();
        });

        // Faculty Dashboard - Assignment Upload (Firebase Storage & Firestore)
        const assignmentUploadForm = document.getElementById('assignmentUploadForm');
        assignmentUploadForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            if (!currentUser || currentUserType !== 'faculty') {
                showMessage('assignmentUploadStatus', 'You must be logged in as a faculty to upload assignments.', true);
                return;
            }

            const title = document.getElementById('assignmentTitle').value;
            const file = document.getElementById('assignmentFile').files[0];

            if (!title || !file) {
                showMessage('assignmentUploadStatus', 'Please provide a title and select a file.', true);
                return;
            }

            showMessage('assignmentUploadStatus', 'Uploading assignment...', false);

            try {
                // Developer Note: Firebase Storage security rules must allow authenticated write.
                const storageRef = ref(storage, `assignments/${currentUser.uid}/${file.name}`);
                const snapshot = await uploadBytes(storageRef, file);
                const downloadURL = await getDownloadURL(snapshot.ref);

                // Developer Note: Save assignment details (title, URL, faculty ID) to Firestore
                // This makes it available for students to download.
                await addDoc(collection(db, "assignments"), {
                    title: title,
                    url: downloadURL,
                    facultyId: currentUser.uid,
                    facultyEmail: currentUser.email,
                    institute: currentUserInstitute, // Link to faculty's institute
                    timestamp: new Date()
                });

                showMessage('assignmentUploadStatus', 'Assignment uploaded successfully!', false);
                assignmentUploadForm.reset();
                // Developer Note: You would then need to update the student dashboard to show this new assignment.
            } catch (error) {
                console.error("Error uploading assignment:", error);
                showMessage('assignmentUploadStatus', 'Failed to upload assignment. Please try again.', true);
            }
        });

        // --- Chatbot Functionality (EmailJS Integration) ---
        const chatbotToggle = document.getElementById('chatbotToggle');
        const chatbotPopup = document.getElementById('chatbotPopup');
        const chatbotClose = document.getElementById('chatbotClose');
        const chatbotMessages = document.getElementById('chatbotMessages');
        const chatbotInput = document.getElementById('chatbotInput');
        const chatbotSend = document.getElementById('chatbotSend');

        chatbotToggle.addEventListener('click', () => {
            chatbotPopup.style.display = chatbotPopup.style.display === 'flex' ? 'none' : 'flex';
        });

        chatbotClose.addEventListener('click', () => {
            chatbotPopup.style.display = 'none';
        });

        chatbotSend.addEventListener('click', sendMessage);
        chatbotInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });

        async function sendMessage() {
            const message = chatbotInput.value.trim();
            if (message === '') return;

            // Add user message to chat
            const userBubble = document.createElement('div');
            userBubble.classList.add('message-bubble', 'user');
            userBubble.textContent = message;
            chatbotMessages.appendChild(userBubble);
            chatbotInput.value = '';
            chatbotMessages.scrollTop = chatbotMessages.scrollHeight; // Scroll to bottom

            // Simulate bot response / Send email via EmailJS
            const botBubble = document.createElement('div');
            botBubble.classList.add('message-bubble', 'bot');
            botBubble.textContent = 'Sending your request...';
            chatbotMessages.appendChild(botBubble);
            chatbotMessages.scrollTop = chatbotMessages.scrollHeight;

            try {
                // EmailJS Service ID: service_nvwp74b
                // EmailJS Template ID: template_jphnhtj
                // EmailJS Public ID: DqEZGom9bxso5B5Zl
                const templateParams = {
                    from_name: 'Chatbot User', // You might want to get user's name if logged in
                    user_email: 'anonymous@example.com', // You might want to get user's email if logged in
                    message: message,
                    to_email: 'contact.cbsnu@gmail.com' // Your official email
                };

                const response = await emailjs.send('service_nvwp74b', 'template_jphnhtj', templateParams);
                console.log('EmailJS Success!', response.status, response.text);
                botBubble.textContent = 'Your message has been sent to CBSN-U support. We will get back to you soon!';
            } catch (error) {
                console.error('EmailJS Failed...', error);
                botBubble.textContent = 'Sorry, there was an error sending your message. Please try again later or contact us directly.';
            }
            chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
        }


        // --- Admin Page Functionality ---

        // Admin Login (Firebase Authentication)
        const adminLoginForm = document.getElementById('adminLoginForm');
        const adminDashboard = document.getElementById('adminDashboard');
        const clientDashboard = document.getElementById('clientDashboard');

        adminLoginForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('adminLoginEmail').value;
            const password = document.getElementById('adminLoginPassword').value;

            try {
                const userCredential = await signInWithEmailAndPassword(auth, email, password);
                const user = userCredential.user;

                // Developer Note: You MUST implement an authorization check here.
                // For example, store a list of admin UIDs in Firestore, or assign a 'role: admin' field
                // to admin user documents in Firestore.
                // This is a critical security step.
                const adminDocRef = doc(db, "admins", user.uid); // Example: check if user is in 'admins' collection
                const adminDocSnap = await getDoc(adminDocRef);

                if (adminDocSnap.exists()) {
                    currentUser = user;
                    currentUserId = user.uid;
                    currentUserType = 'admin'; // Set user type
                    showMessage('adminLoginMessage', 'Admin login successful!', false);
                    adminDashboard.style.display = 'block';
                    clientDashboard.style.display = 'none'; // Hide client dashboard
                    adminLoginForm.reset();
                    loadUserList(); // Load user list for admin
                } else {
                    await signOut(auth); // Not an authorized admin, log them out
                    showMessage('adminLoginMessage', 'Access Denied: Not an authorized admin.', true);
                }

            } catch (error) {
                console.error("Admin login error:", error);
                showMessage('adminLoginMessage', 'Admin login failed. Invalid credentials or access.', true);
            }
        });

        // Client Login (Firebase Authentication)
        const clientLoginForm = document.getElementById('clientLoginForm');
        clientLoginForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('clientLoginEmail').value;
            const password = document.getElementById('clientLoginPassword').value;

            try {
                const userCredential = await signInWithEmailAndPassword(auth, email, password);
                const user = userCredential.user;

                // Developer Note: Similar to admin, you need to check if this user is a 'client' type
                // in your Firestore 'users' collection.
                const userDocRef = doc(db, "users", user.uid);
                const userDocSnap = await getDoc(userDocRef);

                if (userDocSnap.exists() && userDocSnap.data().userType === 'client') {
                    currentUser = user;
                    currentUserId = user.uid;
                    currentUserType = 'client'; // Set user type
                    currentUserInstitute = userDocSnap.data().institute; // Get client's institute
                    showMessage('clientLoginMessage', 'Client login successful!', false);
                    clientDashboard.style.display = 'block';
                    adminDashboard.style.display = 'none'; // Hide admin dashboard
                    clientLoginForm.reset();
                } else {
                    await signOut(auth);
                    showMessage('clientLoginMessage', 'Access Denied: Not an authorized client.', true);
                }

            } catch (error) {
                console.error("Client login error:", error);
                showMessage('clientLoginMessage', 'Client login failed. Invalid credentials or access.', true);
            }
        });


        // Announcement Upload (Admin Dashboard - Firebase Firestore)
        const announcementUploadForm = document.getElementById('announcementUploadForm');
        announcementUploadForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            if (!currentUser || currentUserType !== 'admin') {
                showMessage('announcementStatus', 'You must be logged in as an admin to upload announcements.', true);
                return;
            }

            const announcementText = document.getElementById('announcementText').value;
            if (!announcementText) {
                showMessage('announcementStatus', 'Announcement text cannot be empty.', true);
                return;
            }

            showMessage('announcementStatus', 'Publishing announcement...', false);
            try {
                // Developer Note: Firestore security rules must allow admin write to 'announcements'.
                await addDoc(collection(db, "announcements"), {
                    text: announcementText,
                    timestamp: new Date(),
                    publishedBy: currentUser.email
                });
                showMessage('announcementStatus', 'Announcement published successfully!', false);
                announcementUploadForm.reset();
                loadAnnouncements(); // Refresh announcements on home page
            } catch (error) {
                console.error("Error publishing announcement:", error);
                showMessage('announcementStatus', 'Failed to publish announcement.', true);
            }
        });

        // Photo Gallery Upload (Admin Dashboard - Firebase Storage & Firestore)
        const galleryUploadForm = document.getElementById('galleryUploadForm');
        galleryUploadForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            if (!currentUser || currentUserType !== 'admin') {
                showMessage('galleryUploadStatus', 'You must be logged in as an admin to upload images.', true);
                return;
            }

            const imageFile = document.getElementById('galleryImage').files[0];
            const imageCaption = document.getElementById('imageCaption').value;

            if (!imageFile) {
                showMessage('galleryUploadStatus', 'Please select an image file.', true);
                return;
            }

            showMessage('galleryUploadStatus', 'Uploading image...', false);

            try {
                // Developer Note: Firebase Storage security rules must allow admin write.
                const storageRef = ref(storage, `gallery/${imageFile.name}`);
                const snapshot = await uploadBytes(storageRef, imageFile);
                const downloadURL = await getDownloadURL(snapshot.ref);

                // Developer Note: Save image details to Firestore.
                await addDoc(collection(db, "gallery"), {
                    url: downloadURL,
                    caption: imageCaption,
                    uploadedBy: currentUser.email,
                    timestamp: new Date()
                });

                showMessage('galleryUploadStatus', 'Image uploaded successfully!', false);
                galleryUploadForm.reset();
                loadHomePhotoGallery(); // Refresh gallery on home page
            } catch (error) {
                console.error("Error uploading image:", error);
                showMessage('galleryUploadStatus', 'Failed to upload image.', true);
            }
        });

        // User List (Admin Dashboard - Firebase Firestore)
        const userListBody = document.getElementById('userListBody');

        async function loadUserList() {
            if (!currentUser || currentUserType !== 'admin') {
                userListBody.innerHTML = '<tr><td colspan="5" style="text-align: center; color: #FF6B6B;">Admin access required to view user list.</td></tr>';
                return;
            }

            userListBody.innerHTML = '<tr><td colspan="5" style="text-align: center;">Loading users...</td></tr>';
            try {
                // Developer Note: Firestore security rules must allow admin read for 'users' collection.
                const q = query(collection(db, "users"));
                const querySnapshot = await getDocs(q);
                let userRows = '';
                if (querySnapshot.empty) {
                    userRows = '<tr><td colspan="5" style="text-align: center;">No users registered yet.</td></tr>';
                } else {
                    querySnapshot.forEach((doc) => {
                        const userData = doc.data();
                        userRows += `
                            <tr>
                                <td>${doc.id}</td>
                                <td>${userData.email}</td>
                                <td>${userData.userType}</td>
                                <td>${userData.institute || 'N/A'}</td>
                                <td>
                                    <button class="btn btn-secondary action-btn edit-user-btn" data-id="${doc.id}">Edit</button>
                                    <button class="btn action-btn delete-user-btn" style="background-color: #dc3545;" data-id="${doc.id}">Delete</button>
                                </td>
                            </tr>
                        `;
                    });
                }
                userListBody.innerHTML = userRows;

                // Add event listeners for edit/delete buttons (these would trigger modals/backend calls)
                document.querySelectorAll('.delete-user-btn').forEach(button => {
                    button.addEventListener('click', async (e) => {
                        const userIdToDelete = e.target.getAttribute('data-id');
                        // Developer Note: Implement confirmation modal instead of alert
                        if (confirm(`Are you sure you want to delete user ${userIdToDelete}?`)) {
                            try {
                                // Developer Note: Deleting user from Firebase Auth and Firestore requires backend (Cloud Functions)
                                // for security and completeness. Frontend can only delete Firestore document.
                                await deleteDoc(doc(db, "users", userIdToDelete));
                                showMessage('adminLoginMessage', `User ${userIdToDelete} deleted from database.`, false);
                                loadUserList(); // Refresh list
                            } catch (error) {
                                console.error("Error deleting user:", error);
                                showMessage('adminLoginMessage', 'Failed to delete user.', true);
                            }
                        }
                    });
                });
                // Edit user button logic would open a form to edit user data
            } catch (error) {
                console.error("Error loading user list:", error);
                userListBody.innerHTML = '<tr><td colspan="5" style="text-align: center; color: #FF6B6B;">Failed to load user list.</td></tr>';
            }
        }

        // Course Upload (Client Dashboard - Firebase Firestore)
        const courseUploadForm = document.getElementById('courseUploadForm');
        courseUploadForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            if (!currentUser || currentUserType !== 'client') {
                showMessage('courseUploadStatus', 'You must be logged in as a client to upload courses.', true);
                return;
            }

            const courseName = document.getElementById('courseName').value;
            const courseDescription = document.getElementById('courseDescription').value;
            const courseFees = document.getElementById('courseFees').value;

            if (!courseName || !courseFees) {
                showMessage('courseUploadStatus', 'Course name and fees are required.', true);
                return;
            }

            showMessage('courseUploadStatus', 'Uploading course...', false);

            try {
                // Developer Note: Firestore security rules must allow client write to 'courses' collection
                // and ensure the course is linked to their institute.
                await addDoc(collection(db, "courses"), {
                    name: courseName,
                    description: courseDescription,
                    fees: parseFloat(courseFees),
                    instituteId: currentUser.uid, // Link course to client's user ID
                    instituteName: currentUserInstitute, // Link course to client's institute name
                    uploadedBy: currentUser.email,
                    timestamp: new Date()
                });
                showMessage('courseUploadStatus', 'Course uploaded successfully!', false);
                courseUploadForm.reset();
                // Developer Note: This course would then need to be displayed in student dashboards
                // based on their institute.
            } catch (error) {
                console.error("Error uploading course:", error);
                showMessage('courseUploadStatus', 'Failed to upload course.', true);
            }
        });


        // --- About Us Page Functionality ---

        // Complaint Box (EmailJS Integration)
        const complaintForm = document.getElementById('complaintForm');
        complaintForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const name = document.getElementById('complaintName').value;
            const email = document.getElementById('complaintEmail').value;
            const subject = document.getElementById('complaintSubject').value;
            const message = document.getElementById('complaintMessage').value;

            if (!name || !email || !subject || !message) {
                showMessage('complaintMessageStatus', 'Please fill all fields.', true);
                return;
            }

            showMessage('complaintMessageStatus', 'Sending complaint...', false);

            try {
                const templateParams = {
                    from_name: name,
                    user_email: email,
                    subject: subject,
                    message: message,
                    to_email: 'contact.cbsnu@gmail.com' // Your official email for complaints
                };

                const response = await emailjs.send('service_nvwp74b', 'template_jphnhtj', templateParams); // Using the same template for simplicity
                console.log('EmailJS Success!', response.status, response.text);
                showMessage('complaintMessageStatus', 'Complaint submitted successfully! We will review it shortly.', false);
                complaintForm.reset();
                // Developer Note: For a robust system, complaints should also be logged in Firestore
                // and visible in the Admin Dashboard.
            } catch (error) {
                console.error('EmailJS Failed...', error);
                showMessage('complaintMessageStatus', 'Failed to submit complaint. Please try again.', true);
            }
        });

        // --- Initial Data Loading on DOM Content Loaded ---
        // This ensures that dynamic content is loaded as soon as the HTML is ready.
        document.addEventListener('DOMContentLoaded', () => {
            // Initial call to load content for Home page
            loadAnnouncements();
            loadHomePhotoGallery();
            loadFeedbacks();
            updateCounts();
            // No specific initial load for Academic/Admin/About Us as they are section-based
            // and their content loads when the section is activated or a user logs in.
        });

    </script>
</body>
</html>

